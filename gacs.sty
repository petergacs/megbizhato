\ProvidesPackage{gacs}
 % my header file for articles.  Peter Gacs
% Use \usepackage{fullpage} normally.
 % If you want very full page in tenpoint, write \textwidth 6.5in,
 % \oddsidemargin 0in in articles, 0.25in in letters.
 % The latter sets the margin to 1in on both sides of the page.
 % \topmargin?

%\RequirePackage{amsmath}
\RequirePackage{mathtools}
\RequirePackage{amssymb}
\mathtoolsset{mathic} % Math italic correction (say in theorems).
\RequirePackage{amsthm}
\RequirePackage{cheatpf2}
\RequirePackage{graphicx}
\RequirePackage[x11names]{xcolor}
\@ifundefined{nopagecolor}{\newcommand{\nopagecolor}{\pagecolor{white}}}{}

\RequirePackage{ifxetex}

\ifxetex
\RequirePackage[math]{mathspec}
\newfontfamily\optimaFont{Optima}
\newfontfamily\libertineFont[Scale=1.1]{LinLibertine}
\newfontface\iowanFont[BoldFont = * Bold]{Iowan Old Style}
\newfontface\goudyFont{Goudy Oldstyle Std Bold}
% \charterFont in XeTeX fontspec allows scaling.
\newfontface\charterFont[BoldFont = * Bold]{Charter}
%\newfontface\charterFont[Scale=MatchLowercase,BoldFont = * Bold]{Charter}
\newfontface\palatinoFont[BoldFont= * Bold]{Palatino}
\else
\newcommand{\charterFont}{\fontfamily{bch}\selectfont}
\newcommand{\timesFont}{\fontfamily{ptm}\selectfont}
\newcommand{\palatinoFont}{\fontfamily{ppl}\selectfont}
\newcommand{\newCenturyFont}{\fontfamily{fnc}\selectfont}
\newcommand{\libertineFont}{\fontfamily{LinuxLibertineT-LF}\selectfont}
% biolinum is like optima, but part of texlive, so can be used with pdftex.  Does not look as pleasant.
%\newcommand{\biolinumFont}{\fontfamily{LinuxBiolinumT-LF}\selectfont}
\fi

% I you want mathbf with for example bch:
%\DeclareMathAlphabet      {\mathbf}{T1}{bch}{bx}{n}


\RequirePackage{enumitem}
\setlist[enumerate,1]{leftmargin=*}
\setlist[itemize]{label=\raisebox{0.3ex}{\scalebox{0.9}{\textbullet}}}
\setlist[itemize,1]{leftmargin=*}
\setlist[description]{font=\normalfont\textsf, leftmargin=1em}

\pdfpagewidth=8.5in     % paper size of the pdf output (letter in this case)
\pdfpageheight=11in

% I you use it, use the a4paper option, too.
% \pdfpagewidth=210mm     % paper size of the pdf output (letter in this case)
% \pdfpageheight=297mm

\raggedbottom  % Avoid strange spaces between paragraphs, at the price of having unequal page length.
\setlength{\vfuzz}{4pt} % to ignore trivial vertical overfull boxes.
% Now I use sloppypar where needed:
%\sloppy  % To get fewer overfull boxes.

% maybe we do not need these with raggedbottom:
\clubpenalty=1000 
\widowpenalty=1000

\newcommand{\textbsf}[1]{\textbf{\sffamily #1}}

% For using cmforall and cmexists in libertine.
\DeclareSymbolFont{cmsymbols}     {OMS}{cmsy}{m}{n}
\DeclareMathSymbol{\cmforall}{\mathord}{cmsymbols}{"38}
\DeclareMathSymbol{\cmexists}{\mathord}{cmsymbols}{"39}
% For using medcirc from newtxmath.  Might as well declare the other symbols from symbolsC.
\DeclareSymbolFont{symbolsC}{U}{ntxsyc}{m}{n}
  \SetSymbolFont{symbolsC}{bold}{U}{ntxsyc}{b}{n}
  \DeclareFontSubstitution{U}{ntxsyc}{m}{n}
  \DeclareMathSymbol{\medcirc}{\mathbin}{symbolsC}{7}
%\newcommand{\medcirc}{\raisebox{0.3ex}{\scalebox{0.7}{\(\bigcirc\)}}}

% In \newtxtmath[libertine] the liby option replaces an ugly math y, 
% and I also replaced some unsightly font choices with the cm or AMS versions.
\newcommand{\myLibertine}{
\usepackage[T1]{fontenc} 
%\usepackage[ttscaled=0.9]{libertine}
\usepackage[tt=false]{libertine}
\usepackage[libertine,liby,libaltvw,bigdelims]{newtxmath} 
\renewcommand{\ttdefault}{lmtt}
%\usepackage[cal=cm,bb=ams]{mathalfa}
\usepackage[cal=cm,bb=boondox]{mathalfa}
\DeclareMathSymbol{\cmforall}{\mathord}{cmsymbols}{"38}
\DeclareMathSymbol{\cmexists}{\mathord}{cmsymbols}{"39}
\renewcommand{\forall}{\cmforall}
\renewcommand{\exists}{\cmexists}
 }

\newcommand{\myTimes}{
 \usepackage{newtxtext} 
 \usepackage{newtxmath} 
 \renewcommand{\ttdefault}{lmtt}
% Replace some bad-looking fonts of newtxmath.
 \usepackage[cal=cm, bb=boondox]{mathalfa}
  \renewcommand{\sfdefault}{cmss}
  \DeclareMathAlphabet{\mathsf}{OT1}{cmss}{m}{n}
  \SetMathAlphabet{\mathsf}{bold}{OT1}{cmss}{b}{n}
}

\newcommand{\myCentury}{
\usepackage{lmodern} % T1 encoded cmr
\usepackage{fouriernc}
\usepackage[cal=cm]{mathalfa}  % not available in older texlive.
% \DeclareSymbolFont{AMSb}{U}{msb}{m}{n}
% \DeclareSymbolFontAlphabet{\math@bb}{AMSb}
}

\newcommand{\myCharter}{
  \usepackage[bitstream-charter]{mathdesign} 
  \usepackage[cal=cm]{mathalfa}
}


% For enumitem.sty
\newenvironment{bullets}{\begin{enumerate}[label=\textbullet]}{\end{enumerate}}
\newenvironment{dashes}{\begin{enumerate}[label=\bfseries\textendash]}{\end{enumerate}}

\newenvironment{flushdescription}{\leftmargini=1em\renewcommand
{\descriptionlabel}[1]{\hspace\labelsep \textit{##1.}}\begin{description}}
{\end{description}}

\newenvironment{alphenum}
 {\begin{enumerate}[label=\upshape{(\alph*)},ref=\upshape{\alph*}]}{\end{enumerate}}
\newenvironment{romanenum}
 {\begin{enumerate}[label=\upshape{(\roman*)},ref=\upshape{\roman*}]}{\end{enumerate}}
\newenvironment{Alphenum}
 {\begin{enumerate}[label=\upshape{(\Alph*)},ref=\upshape{\Alph*}]}{\end{enumerate}}

% The lemma counter is used by almost all theorem and definition environments.
% The reference of {alphenumIn} attaches the alphabetic reference to this counter.
\newenvironment{enumIn}
 {\begin{enumerate}[label=\upshape{\arabic*)},ref=\thelemma.\upshape{\arabic*}]}{\end{enumerate}}
\newenvironment{alphenumIn}
 {\begin{enumerate}[label=\upshape{\alph*)},ref=\thelemma.\upshape{\alph*}]}{\end{enumerate}}
\newenvironment{AlphenumIn}
 {\begin{enumerate}[label=\upshape{\Alph*)},ref=\thelemma.\upshape{\Alph*}]}{\end{enumerate}}
\newenvironment{romenumIn}
 {\begin{enumerate}[label=\upshape{\roman*)},ref=\thelemma.\upshape{\roman*}]}{\end{enumerate}}

\newenvironment{cjenum}
 {\begin{enumerate}[label=\upshape{(\alph*)},ref=\upshape{\alph*}]}{\end{enumerate}}
\newenvironment{djenum}
 {\begin{enumerate}[label=\upshape{(\arabic*)},ref=\upshape{\arabic*}]}{\end{enumerate}}

% For enumerate.sty:
% \newenvironment{bullets}{\begin{enumerate}[\textbullet]}{\end{enumerate}}
% \newenvironment{dashes}{\begin{enumerate}[\bfseries\textendash]}{\end{enumerate}}
% \newenvironment{alphenum}
%  {\begin{enumerate}[{\upshape (a)}]}{\end{enumerate}}

% % Use with enumerate.sty, to delete annoying warnings.
% \def\@@enum@[#1]{%
%   \@enLab{}\let\@enThe\@enQmark
%   \@enloop#1\@enum@
% %   \ifx\@enThe\@enQmark\@warning{The counter will not be printed.%
% %    ^^J\space\@spaces\@spaces\@spaces The label is: \the\@enLab}\fi
%   \expandafter\edef\csname label\@enumctr\endcsname{\the\@enLab}%
%   \expandafter\let\csname the\@enumctr\endcsname\@enThe
%   \csname c@\@enumctr\endcsname7
%   \expandafter\settowidth
%             \csname leftmargin\romannumeral\@enumdepth\endcsname
%             {\the\@enLab\hspace{\labelsep}}%
%   \@enum@}


\newcommand{\BUHeadEmailArg}[1]{
  {\renewcommand{\sfdefault}{phv}%
    \newlength{\widthdiff}
    \newlength{\leftshift}
    \setlength{\widthdiff}{6in}
    \addtolength{\widthdiff}{-\textwidth}

    \vspace*{-1in}
    \noindent\hspace{-0.5\widthdiff}
    \makebox[6in]{
      \raise-4ex\hbox{\includegraphics[scale=0.3]{boston_univ_cmyk}}
      \hfil
      \begin{tabular}{r@{}}\hspace{1em}
        \sffamily {\bfseries College of Arts} \& {\bfseries Sciences}
        \hspace{0.5em} Department of Computer Science
        \\\footnotesize\sffamily 111 Cummington Street, Boston, MA 02215-2411, (617) 353-8919
        \\ \footnotesize\sffamily #1
      \end{tabular}
    }
    \vspace{0.5in}
  }
}
 
\newcommand{\BUhead}{\BUHeadEmailArg{gacs@bu.edu}}

% definitions, can be redefined to boldface or \textit\textbf, if desired.
\newcommand{\df}[1]{\emph{#1}}
% \newcommand{\df}[1]{\textit{{\bfseries #1}}}

 \let\paragraphname\@empty  % an amsart bug

% amsthm bug: put \ after \begin{proof}, if you want to write
% \paragraph{..}.

% To have pagenumber 1 suppressed:
\newcommand{\@hideone}[1]{\ifnum #1=1\else\@arabic#1\fi}
\pagenumbering{hideone}

 \newcommand{\Pageno}{\c@page}
% \newcommand{\Oddhead}{\@oddhead}

 \newcommand{\Line}[1]{\makebox[\textwidth]{#1}}

% In amsmath:
% \numberwithin{equation}{section}
% \numberwithin{figure}{section}

 \setcounter{tocdepth}{2}

\newcommand{\newThmHeads}[3]{ % #3 is the note  font
  \newtheoremstyle{#1definition}
  {5pt}%      Space above
  {5pt}%      Space below
  {}%         Body font
  {}%         Indent amount (empty = no indent, \parindent = para indent)
  {#2}% Thm head font
%  {\fontfamily{ybv}\selectfont\bfseries\upshape} % Baskervald
% {\fontfamily{bch}\selectfont\upshape}%
  {}%        Punctuation after thm head
  {.5em}%     Space after thm head: " " = normal interword space;
        %       \newline = linebrea
        %       Thm head spec (can be left empty, meaning `normal'):
  {\thmname{##1}\thmnumber{~##2}\thmnote{~#3\mdseries(\hspace{0.05em}##3\hspace{0.1em})}}

  \newtheoremstyle{#1theorem}
  {5pt}%      Space above
  {5pt}%      Space below
  {\itshape}% Body font
  {}%         Indent amount (empty = no indent, \parindent = para indent)
  {#2}% Thm head font
  {}%        Punctuation after thm head
  {.5em}%     Space after thm head: " " = normal interword space;
        %       \newline = linebreak
        %       Thm head spec (can be left empty, meaning `normal'):
  {\thmname{##1}\thmnumber{ ##2}\thmnote{~#3\mdseries(\hspace{0.07em}##3\hspace{0.07em})}}
  % Problems are not theorems, see below.
  \renewcommand{\problemfont}{#2}
}

\newcommand{\customqed}[1]{{\renewcommand{\qedsymbol}{#1}\qed}}
\newcommand{\varqed}{\customqed{\hbox{$\lrcorner$}}} % amssymb?
%\newcommand{\varqed}{\customqed{\hbox{$\diamondsuit$}}}

\newcommand{\intheoremstyle}{
 \newtheorem{lemma}{Lemma}[section]

%\newtheorem{theorem}{Theorem}[section]
% Sometimes we want to number theorems independently of sections.
% But this should be decided in the paper itself.
\newtheorem{theorem}{Theorem}
 \newtheorem{proposition}[lemma]{Proposition}
 \newtheorem{fact}[lemma]{Fact}
 \newtheorem{claim}[lemma]{Claim} % same as theorems
 \newtheorem*{claimnonumber}{Claim} % 
 \newtheorem{corollary}[lemma]{Corollary}
 \newtheorem{axiom}[lemma]{Axiom}
 \newtheorem{conjecture}[lemma]{Conjecture}
 \newtheorem{goal}[lemma]{Goal}
 \newtheorem{question}{Question}
}

\newcommand{\indefinitionstyle}{
\newtheorem{Definition}[lemma]{Definition}
\newenvironment{definition}{\begin{Definition}}{\varqed\end{Definition}}

 \newtheorem{Notation}[lemma]{Notation}
  \newenvironment{notation}{%
   \begin{Notation}}{\varqed\end{Notation}}

 \newtheorem{Condition}[lemma]{Condition}
 \newenvironment{condition}{%
   \begin{Condition}}{\varqed\end{Condition}}

 \newtheorem{exercise}{Exercise}[section]
 \newtheorem{HwExercise}{Exercise}
% \newtheorem{problem}{Problem}
 
 \newtheorem{aRule}{Rule}[section]
 \newenvironment{arule}{\begin{aRule}}{\varqed\end{aRule}}

 \newtheorem{Remark}[lemma]{Remark}
 \newtheorem*{Remarknonumber}{Remark} % 
 \newtheorem{Remarks}[lemma]{Remarks}
 
 \newenvironment{remark}{%
   \begin{Remark}}{\varqed\end{Remark}}
 \newenvironment{remarknonumber}{%
\begin{Remarknonumber}}{\varqed\end{Remarknonumber}}

 \newenvironment{remarks}{%
   \begin{Remarks}}{\varqed\end{Remarks}}

 \newtheorem{Example}[lemma]{Example}
 \newtheorem{Examples}[lemma]{Examples}

 \newenvironment{example}{%
   \begin{Example}}{\varqed\end{Example}}
 \newenvironment{examples}{%
   \begin{Examples}}{\varqed\end{Examples}}

 \theoremstyle{remark}
}
\newcommand{\restofTheorems}{} %othertheorems

\newcommand{\newTheorems}[2]{
\newThmHeads{#1}{#2}{\normalfont}
\theoremstyle{#1theorem}
\intheoremstyle
\theoremstyle{#1definition}
\indefinitionstyle
\restofTheorems
}

% Arguments are the font names for headings and for descriptions.
\newcommand{\newHeadings}[2]{
\pretitle{\begin{center}#1\LARGE}
\posttitle{\end{center}}
\renewcommand{\abstractnamefont}{#1\bfseries}
\renewcommand{\chaptitlefont}{#1\Large\bfseries}
\renewcommand*{\cftchapterfont}{#1\bfseries}

\setsecheadstyle{#1\Large\bfseries\raggedright}
\setsubsecheadstyle{#1\large\bfseries\raggedright}
\setsubsubsecheadstyle{#1\normalsize\bfseries\raggedright}
\setparaheadstyle{#1\normalsize\bfseries\raggedright}
\setsubparaheadstyle{#1\normalsize\bfseries\raggedright}

\setlist[description]{font=#2,leftmargin=1em}
} % newHeadings

 \newcounter{program}
 \newcounter{progpart}
 \def\theHprogpart{\theprogram\pfdot\arabic{progpart}} 
 \newcommand{\proglb}[1]{\refstepcounter
  {progpart}\label{#1}\`
  \makebox[0mm][r]{\makebox[\textwidth][l]{\upshape\mdseries
                                 (\arabic{progpart})\hfill}}}

% This version of the problem and solution environment is needed if you want to
% float around some figure: list environments like the theorem environment are not tolerated 
% for example in the package floatflt.
\newcounter{probl}
\newcommand{\problemfont}{\bfseries}
\newenvironment{problem}{\refstepcounter{probl}\par\medskip\noindent
  {\problemfont Problem \arabic{probl}~}}{}
\newenvironment{solution}{\par\medskip\noindent{\itshape Solution.}}{}


 \newenvironment{program}{
 \refstepcounter{program}
\setcounter{progpart}{0}\ttfamily
  \def\1##1{\+ \{ \\##1 \}\-}
  \def\0##1{\+ \{ ##1 \}\-}
  \def\2##1{\+ ##1 \-}
  \def\3##1{\+\> ##1 \-}
 \begin{tabbing}
 beg\=beg\=beg\=beg\=beg\=beg\=beg\=beg\=beg\=beg\=beg\=beg\=beg\=beg\+\kill
  }{\end{tabbing}}

  % Redefinition of built-in operators so as they find their argument like
 % the defined ones, without expanding it first.
 \newcommand\ol[1]{\overline{#1}}
 \newcommand\olol[1]{\overline{\overline{#1}}}
 \newcommand\ul[1]{\underline{#1}}
 
 % fonts
 \newcommand\cl[1]{\mathcal{#1}}
 \newcommand\Bf[1]{{\bf #1}}
 
 % Greek characters
 \newcommand \ag{\alpha}
 \newcommand \bg{\beta}
% \renewcommand\gg{\gamma} % temporary, since it conflicts with `>>'.
 \newcommand \gm{\gamma}
 \newcommand \Gg{\Gamma}
 \newcommand \dg{\delta}
 \newcommand \Dg{\Delta}
 \newcommand \eps{\varepsilon}
 \newcommand \fg{\varphi}
 \newcommand \Fg{\Phi}
 \newcommand \hg{\chi}
 \newcommand \ig{\iota}
 \newcommand \kg{\kappa}
 \renewcommand \lg{\lambda} % it conflicts with lg (this is not serious).
 \newcommand \Lg{\Lambda}
 \newcommand \og{\omega}
 \newcommand \Og{\Omega}
 \newcommand \rg{\varrho}
 \newcommand \sg{\sigma}
 \newcommand \Sg{\Sigma}
 \newcommand{\thg}{\vartheta}
 \newcommand \Thg{\Theta}
 \newcommand \tg{\tau}    % avoid, not worth it
 \newcommand{\zg}{\zeta}

\newcommand{\vek}[1]{\boldsymbol{#1}}

 \newcommand{\bA}{\mathbf{A}}
 \newcommand{\bB}{\mathbf{B}}
 \newcommand{\bC}{\mathbf{C}}
 \newcommand{\bD}{\mathbf{D}}
 \newcommand{\bE}{\mathbf{E}}
 \newcommand{\bF}{\mathbf{F}}
 \newcommand{\bG}{\mathbf{G}}
 \newcommand{\bH}{\mathbf{H}}
 \newcommand{\bI}{\mathbf{I}}
 \newcommand{\bJ}{\mathbf{J}}
 \newcommand{\bK}{\mathbf{K}}
 \newcommand{\bL}{\mathbf{L}}
 \newcommand{\bM}{\mathbf{M}}
 \newcommand{\bN}{\mathbf{N}}
 \newcommand{\bO}{\mathbf{O}}
 \newcommand{\bP}{\mathbf{P}}
 \newcommand{\bQ}{\mathbf{Q}}
 \newcommand{\bR}{\mathbf{R}}
 \newcommand{\bS}{\mathbf{S}}
 \newcommand{\bT}{\mathbf{T}}
 \newcommand{\bU}{\mathbf{U}}
 \newcommand{\bV}{\mathbf{V}}
 \newcommand{\bW}{\mathbf{W}}
 \newcommand{\bX}{\mathbf{X}}
 \newcommand{\bY}{\mathbf{Y}}
 \newcommand{\bZ}{\mathbf{Z}}

  \newcommand{\bsA}{\vek{A}}
%%  \newcommand{\bsB}{\vek{B}}
%%  \newcommand{\bsC}{\vek{C}}
%%  \newcommand{\bsD}{\vek{D}}
%%  \newcommand{\bsE}{\vek{E}}
%%  \newcommand{\bsF}{\vek{F}}
  \newcommand{\bsG}{\vek{G}}
  \newcommand{\bsH}{\vek{H}}
  \newcommand{\bsI}{\vek{I}}
%%  \newcommand{\bsJ}{\vek{J}}
  \newcommand{\bsK}{\vek{K}}
%%  \newcommand{\bsL}{\vek{L}}
%%  \newcommand{\bsM}{\vek{M}}
%%  \newcommand{\bsN}{\vek{N}}
%%  \newcommand{\bsO}{\vek{O}}
  \newcommand{\bsP}{\vek{P}}
%%  \newcommand{\bsQ}{\vek{Q}}
%%  \newcommand{\bsR}{\vek{R}}
%%  \newcommand{\bsS}{\vek{S}}
%%  \newcommand{\bsT}{\vek{T}}
%%  \newcommand{\bsU}{\vek{U}}
%%  \newcommand{\bsV}{\vek{V}}
%%  \newcommand{\bsW}{\vek{W}}
%%  \newcommand{\bsX}{\vek{X}}
  \newcommand{\bsY}{\vek{Y}}
%%  \newcommand{\bsZ}{\vek{Z}}

 \newcommand{\cA}{\mathcal{A}}
 \newcommand{\cB}{\mathcal{B}}
 \newcommand{\cC}{\mathcal{C}}
 \newcommand{\cD}{\mathcal{D}}
 \newcommand{\cE}{\mathcal{E}}
 \newcommand{\cF}{\mathcal{F}}
 \newcommand{\cG}{\mathcal{G}}
 \newcommand{\cH}{\mathcal{H}}
 \newcommand{\cI}{\mathcal{I}}
 \newcommand{\cJ}{\mathcal{J}}
 \newcommand{\cK}{\mathcal{K}}
 \newcommand{\cL}{\mathcal{L}}
 \newcommand{\cM}{\mathcal{M}}
 \newcommand{\cN}{\mathcal{N}}
 \newcommand{\cO}{\mathcal{O}}
 \newcommand{\cP}{\mathcal{P}}
 \newcommand{\cQ}{\mathcal{Q}}
 \newcommand{\cR}{\mathcal{R}}
 \newcommand{\cS}{\mathcal{S}}
 \newcommand{\cT}{\mathcal{T}}
 \newcommand{\cU}{\mathcal{U}}
 \newcommand{\cV}{\mathcal{V}}
 \newcommand{\cW}{\mathcal{W}}
 \newcommand{\cX}{\mathcal{X}}
 \newcommand{\cY}{\mathcal{Y}}
 \newcommand{\cZ}{\mathcal{Z}}

 \newcommand{\bbB}{\mathbb{B}}
 \newcommand{\bbE}{\mathbb{E}}
 \newcommand{\bbF}{\mathbb{F}}
 \newcommand{\bbG}{\mathbb{G}}
 \newcommand{\bbK}{\mathbb{K}}
 \newcommand{\bbL}{\mathbb{L}}
 \newcommand{\bbC}{\mathbb{C}}
 \newcommand{\bbM}{\mathbb{M}}
 \newcommand{\bbN}{\mathbb{N}}
 \newcommand{\bbP}{\mathbb{P}}
 \newcommand{\bbQ}{\mathbb{Q}}
 \newcommand{\bbR}{\mathbb{R}}
 \newcommand{\bbS}{\mathbb{S}}
 \newcommand{\bbT}{\mathbb{T}}
 \newcommand{\bbV}{\mathbb{V}}
 \newcommand{\bbX}{\mathbb{X}}
 \newcommand{\bbZ}{\mathbb{Z}}

 \newcommand{\dA}{\mathbb{A}}
 \newcommand{\dB}{\mathbb{B}}
 \newcommand{\dF}{\mathbb{F}}
 \newcommand{\dG}{\mathbb{G}}
 \newcommand{\dK}{\mathbb{K}}
 \newcommand{\dL}{\mathbb{L}}
 \newcommand{\dC}{\mathbb{C}}
 \newcommand{\dM}{\mathbb{M}}
 \newcommand{\dN}{\mathbb{N}}
 \newcommand{\dP}{\mathbb{P}}
 \newcommand{\dQ}{\mathbb{Q}}
 \newcommand{\dR}{\mathbb{R}}
 \newcommand{\dS}{\mathbb{S}}
 \newcommand{\dT}{\mathbb{T}}
 \newcommand{\dV}{\mathbb{V}}
 \newcommand{\dZ}{\mathbb{Z}}

 % delimiters
\newcommand{\verythinmathskip}{\mskip 1mu}
\newcommand{\nats}[1]{\mathopen[#1\mathclose]} % \{1,\dots,n\}
 \newcommand\Eventof[1]{\bigl\{\verythinmathskip#1\verythinmathskip\bigr\}}
% \newcommand\Eventof[1]{\bigl[\verythinmathskip#1\verythinmathskip\bigr]}
 \newcommand\Evof[1]{\bigl\{\verythinmathskip#1\verythinmathskip\bigr\}}
% \newcommand\Evof[1]{\bigl[\verythinmathskip#1\verythinmathskip\bigr]}
 \newcommand\eventof[1]{\mathopen\{\verythinmathskip#1\verythinmathskip\mathclose\}}
% \newcommand\eventof[1]{\mathopen[\verythinmathskip#1\verythinmathskip\mathclose]}
 \newcommand\evof[1]{\mathopen[\verythinmathskip#1\verythinmathskip\mathclose]}
 \newcommand\set[1]{\mathopen\{#1\mathclose\}}
 \newcommand\setof[1]{\mathopen\{\verythinmathskip#1\verythinmathskip\mathclose\}}
 \newcommand\Setof[1]{\bigl\{\verythinmathskip#1\verythinmathskip\bigr\}}
 \newcommand\setOf[2]{\mathopen\{\verythinmathskip#1 : #2\verythinmathskip\mathclose\}}
 \newcommand\tupof[1]{\mathopen(\verythinmathskip#1\verythinmathskip\mathclose)}
 \newcommand\tupOf[2]{\mathopen(\verythinmathskip#1: #2\verythinmathskip\mathclose)}
% \newcommand\tupof[1]{\mathopen\langle\verythinmathskip#1\verythinmathskip\mathclose\rangle}
 \newcommand\tup[1]{( #1)}
% \newcommand\tup[1]{\mathopen\langle #1\mathclose\rangle}
%\newcommand{\pair}[2]{\mathopen\langle #1,#2\mathclose\rangle}
\newcommand{\pair}[2]{(#1,#2)}
\newcommand{\bigpair}[2]{\bigl(#1,#2\bigr)}
\newcommand{\abs}[1]{\lvert #1 \rvert}
 \newcommand\ang[1]{{\mathopen\langle #1\mathclose\rangle}}
 \newcommand\Ang[1]{{\left\langle #1\right\rangle}}
 \newcommand\bra[1]{{\langle #1\rvert}}
 \newcommand\ket[1]{{\lvert #1 \rangle}}
 \newcommand\braket[2]{{\mathopen\langle #1 \vert #2 \mathclose\rangle}}
 \newcommand\bigvert[1]{{\bigl\vert\verythinmathskip#1\verythinmathskip\bigr\vert}}
 \newcommand\Verti[1]{{\left\vert\verythinmathskip#1\verythinmathskip\right\vert}}
 \newcommand\bigparen[1]{{\bigl(\verythinmathskip#1\verythinmathskip\bigr)}}
 \newcommand\Bigparen[1]{{\Bigl(\verythinmathskip#1\verythinmathskip\Bigr)}}
 \newcommand\biggparen[1]{{\biggl(#1\biggr)}}
 \newcommand\paren[1]{( #1)}
 \newcommand\Paren[1]{{\left( #1\right)}}
 \newcommand\bigbrace[1]{{\bigl\{ #1\bigr\}}}
 \newcommand\biggbrace[1]{{\biggl\{ #1\biggr\}}}
 \newcommand\Brace[1]{{\left\{ #1\right\}}}
 \newcommand\sqbr[1]{{[ #1]}}
 \newcommand\Sqbr[1]{{\left[ #1\right]}}
 \newcommand\bigsq[1]{{\bigl[ #1\bigr]}}
 \newcommand\Bigsq[1]{{\Bigl[ #1\Bigr]}}
 \newcommand{\cei}[1]{{\lceil #1\rceil}}
 \newcommand{\flo}[1]{{\lfloor #1\rfloor}}
 \newcommand{\Cei}[1]{{\left\lceil #1\right\rceil}}
 \newcommand{\Flo}[1]{{\left\lfloor #1\right\rfloor}}
 \newcommand{\nm}[1]{{\lVert #1\rVert}} % stands for ``norm''
 \newcommand{\norm}[1]{{\lVert #1\rVert}} % stands for ``norm''
 \newcommand{\Norm}[1]{{\left\lVert #1\right\rVert}} % stands for ``norm''

% \newcommand\frto[2]{#1\mathinner{\ldotp\ldotp\/}#2}

 \DeclareMathOperator{\Prob}{\mathbb{P}}
 \newcommand\Pbof[1]{\Prob\mathopen\{\verythinmathskip#1\verythinmathskip\mathclose\}}
% \newcommand\Pbof[1]{\Prob\mathopen[\verythinmathskip#1\verythinmathskip\mathclose]}
 \newcommand\Expv{\mathbf{E}\mskip 1mu}
 \newcommand\Expvof[1]{\mathbf{E}\mskip 1mu\mathopen\{\verythinmathskip#1\verythinmathskip\mathclose\}}
 \newcommand\Vari{\mathrm{Var}\mskip 1mu}
 \newcommand\Variof[1]{\mathrm{Var}\mskip 1mu\mathopen\{\verythinmathskip#1\verythinmathskip\mathclose\}}
 \newcommand\Cov{\mathbf{Cov}\mskip 1mu}
 \newcommand\Maj{\mathop{\operator@font Maj}\nolimits}
 \newcommand\nor{\mathbin{\operator@font NOR}}
 \newcommand\lcm{\mathrm{lcm}}
 \newcommand\ord{\mathrm{ord}}
 \newcommand{\NP}{\mathrm{NP}}
 \newcommand{\RP}{\mathrm{RP}}
 \newcommand{\BPP}{\mathrm{BPP}}
 \newcommand{\co}{\text{co-}}
% \newcommand\ker{\txt{ker}}
 \let\imp=\Rightarrow
 \newcommand\Imp{\mathbin{\;\Longrightarrow\;}}
 \let\eqv=\Leftrightarrow
 \let\ded=\vdash % The sign |-.
 \let\ua=\uparrow
 \let\da=\downarrow
 \let\ot=\leftarrow

% Improved versions of exists and forall, with spacing. 
\newcommand{\pexists}[1]{(\exists\, #1)\;}
\newcommand{\pforall}[1]{(\forall\, #1)\;}
\newcommand{\pexistsun}[1]{(\exists!\, #1)\;}
\newcommand{\pnexists}[1]{(\not\exists\, #1)\;}
% Replace the following with the above, if possible:
\newcommand{\exist}[1]{\exists\, #1\;}
\newcommand{\existun}[1]{\exists!\, #1\;}
\newcommand{\nexist}[1]{\not\exists\, #1\;}
\newcommand{\foralls}[1]{\forall\, #1\;}

 % relation symbols, needs amssymb.
%  \renewcommand{\le}{\leqslant}
%  \renewcommand{\ge}{\geqslant}
  \newcommand{\pmid}{\parallel} 
  \newcommand{\getseq}{\mathrel{\vcentcolon=}}
  \newcommand{\eqgets}{\mathrel{=\vcentcolon}}
 
\newcommand{\lea}{\stackrel{{}_+}{<}}
\newcommand{\gea}{\stackrel{{}_+}{>}}
\newcommand{\eqa}{\stackrel{{}_+}{=}}

\newcommand{\lem}{\stackrel{{}_*}{<}}
\newcommand{\gem}{\stackrel{{}_*}{>}}
\newcommand{\eqm}{\stackrel{{}_*}{=}}

 % symbols
 \newcommand{\on}{\upharpoonright}
 \let\et=\wedge
 \let\Et=\bigwedge
 % \let\v=\vee % conflicts with hacek.
 \let\V=\vee
 \newcommand \true{\hbox{\sffamily true}}
 \newcommand \false{\hbox{\sffamily false}}
 \newcommand {\sbs}{\subset}
 \newcommand {\sbsq}{\subseteq}
 \newcommand {\sbsnq}{\subsetneq}
 \newcommand {\sps}{\supset}
 \newcommand {\spsq}{\supseteq}
 \newcommand {\spsnq}{\supsetneq}
 \newcommand {\eset}{\emptyset}
%  \newcommand {\xcpt}{\mathbin{\raise0.15ex\hbox{$\smallsetminus$}}}
 \newcommand {\xcpt}{\setminus}

 % Writing something both above and below a relation symbol.
\def\Stackrel#1#2#3{\mathrel{\mathop{#2}\limits^{#1}_{#3}}}

% The title of a bibliography is \refname.
% I am not sure the commands below are needed: there are packages now for
% this. 
% If you want to use several bibliographies, with arbitrary names, but
% their items consecutively numbered, write \manybibs first.
% Then for each bibliography, with, e.g., 2-digit labels,
% write \begin{biblike}{10}{Bibliography name}
%  \bibitem{}...
%  ...
%  \end{biblike}
% If you want to restart the numbering say \setcounter{bibno}{0}
 \def\manybibs{
   \newcounter{bibno}
   \def\reusecounter##1{\@nmbrlisttrue\def\@listctr{##1}}
   \def\@bibitem##1{\item\if@filesw \immediate\write\@auxout
       {\string\bibcite{##1}{\the\c@bibno}}\fi\ignorespaces}
   }
 \newenvironment{biblike}[2]{\subsubsection*{#2\@mkboth {#2}{#2}}\begin{list}
   {[\arabic{bibno}]}{\settowidth\labelwidth{[#1]}\leftmargin\labelwidth
   \advance\leftmargin\labelsep
   \reusecounter{bibno} }
   \def\newblock{\hskip .11em plus .33em minus -.07em}
   \sloppy
   \sfcode`\.=1000\relax}{\end{list}}

% I use sometimes Lamport's pf2.sty, which redefines the proof env, and uses kwfont.
\let\kwfont\itshape

% \newenvironment{solution}{\begin{proof}[Solution]\renewcommand
%   {\qedsymbol}{}}{\end{proof}}

% not in pf2 anymore
%\@ifundefined{stepsep}{}{\setlength{\stepsep}{1ex}}  
% space above and below prooof step
 
\@ifundefined{pfmixednumbers}{}{\pfmixednumbers{4}}
% Use short step numbers for all levels >= 3

\setlength{\pfindent}{0.8em}

%\newcommand{\underscore}{\lower0.6ex\hbox{-}}
\newcommand{\underscore}{\lower0.63ex\hbox{-}} % for mathpazo
 \newcommand{\HyphConv}{\def\tempc{0}%
      \expandafter\HyphConvFirst\HyphConvDelim}
 \newcommand{\HyphConvDelim}[1]{#1\%}
 \newcommand{\HyphConvFirst}{\futurelet\tempa\HyphConvCond}
 \newcommand{\HyphConvCond}{%
    \def\tempb{\HyphConvSubst\tempa}%
    \if\tempa\%\let\tempb\HyphConvStop%
    \else\if\tempc0\let\tempc1\if\tempa-\let\tempa\underscore\fi\fi%
%    \else\if\tempa-\let\tempa\underscore\fi
    \fi
    \tempb
  }
 \newcommand{\HyphConvStop}[1]{}
 \newcommand{\HyphConvSubst}[2]{#1\HyphConvFirst}

% \txt does not change font in changing environments.
 \newcommand{\txt}[1]{\text{\rmfamily\mdseries\upshape{#1}}}
% We need \textrm, for example since - otherwise comes out long.
% Also, \upshape is needed since we do not want a change of shape within
% an italic environment, like the statement of a theorem.
% \newcommand{\var}[1]{\ensuremath{\mathord{\textrm{\upshape\HyphConv{#1}}}}}
 \newcommand{\var}[1]{\ensuremath{\mathord{\textrm{\upshape{#1}}}}}

% array with custom column separation
\newenvironment{arraycs}[2]{\setlength{\arraycolsep}{#1}
\begin{array}{#2}}{\end{array}}

\newenvironment{parray}[1]{\setlength{\arraycolsep}{0.2em}
\left(\hskip-\arraycolsep\begin{array}{#1}}{\end{array}
\hskip-\arraycolsep\right )}

% equations in an array with less column separation
\newenvironment{arreqs}[1]{\setlength{\arraycolsep}{0.1em}%\renewcommand{\arraystretch}{1.2}
\begin{array}{#1}}{\end{array}}

\newcommand{\killtext}[1]{}

 \newcommand{\smallfrac}[2]{{\scriptstyle \frac{#1}{#2}}}
 \newcommand{\half}{{\scriptstyle \frac{1}{2}}}
\newcommand{\third}{{\scriptstyle \frac{1}{3}}}
 \newcommand{\fourth}{{\scriptstyle \frac{1}{4}}}
 \newcommand{\threefourth}{{\scriptstyle \frac{3}{4}}}
 \newcommand{\seveneighth}{{\scriptstyle \frac{7}{8}}}

\newenvironment{spmatrix}{\left(\begin{smallmatrix}}{\end{smallmatrix}\right)}

\newcommand{\opint}[2]{(#1,#2)}
\newcommand{\clint}[2]{[#1,#2]}
\newcommand{\lint}[2]{\left[#1,#2\right)}
\newcommand{\biglint}[2]{\bigl[#1,#2\bigr)}
\newcommand{\Lint}[2]{\left[#1,#2\right)}
\newcommand{\rint}[2]{(#1,#2]}

\newcommand\amod{\mskip-\medmuskip\mkern5mu\mathbin
  {\operator@font amod}\penalty900
  \mkern5mu\mskip-\medmuskip}
 % why is the spacing erased after amod in inline math mode?

 % \gluesep stops glue-eating macros.
 % Example: \begin{theorem}\gluesep \begin{itemize} etc.
 % Now the first item begins on a new line.
 \newcommand{\gluesep}{\rule{0pt}{0pt}}
 % \<space> also works.

% two dots
\newcommand{\ldts}{\mathinner{\ldotp\ldotp}}


\newif\if@fontoption{\@fontoptionfalse}
\newif\if@classico{\@classicofalse}

% Cannot be an option like the others, as it must be executed after ProcessOptions.
\newcommand{\defaultOption}{\newTheorems{standard}{\bfseries}\restofTheorems}

 \DeclareOption{sf-headings}{\@fontoptiontrue
\ifxetex\renewcommand{\sffamily}{\optimaFont}\else
\@classicotrue\fi
\newHeadings{\sffamily}{\sffamily\mdseries}\newTheorems{sf}{\sffamily\bfseries}\restofTheorems
}
\DeclareOption{sc-headings}{\@fontoptiontrue\newHeadings{\scshape}{\sffamily\mdseries}\newTheorems{sc}{\scshape}\restofTheorems}

% \DeclareOption{biolinum}{\@fontoptiontrue
% \newHeadings{\biolinumFont}{\biolinumFont}\newTheorems{sf}{\sffamily\bfseries}\restofTheorems}

\DeclareOption{charter-headings}{\@fontoptiontrue\newHeadings
{\charterFont}{\charterFont\mdseries}\newTheorems{charter}{\charterFont\bfseries}\restofTheorems}

\DeclareOption{newcentury-headings}{\@fontoptiontrue\newHeadings
{\newCenturyFont}{\charterFont\mdseries}\newTheorems{fncm}{\newCenturyFont\bfseries}\restofTheorems}

\DeclareOption{times-headings}{\@fontoptiontrue\newHeadings
{\timesFont}{\timesFont\mdseries}\newTheorems{ptm}{\timesFont\bfseries}\restofTheorems
\DeclareMathAlphabet      {\mathbf}{T1}{ptm}{b}{n}
}

\DeclareOption{palatino-headings}{\@fontoptiontrue\newHeadings
{\palatinoFont}{\palatinoFont\mdseries}\newTheorems{palatino}{\palatinoFont\bfseries}\restofTheorems
\DeclareMathAlphabet      {\mathbf}{T1}{ppl}{b}{n}
} 

\DeclareOption{libertine-headings}{% Works better with xetex, since it scales the font, but then mathbf is not changed.
\@fontoptiontrue\newHeadings
{\libertineFont}{\libertineFont\mdseries}\newTheorems{libertine}{\libertineFont\bfseries}\restofTheorems
\DeclareMathAlphabet      {\mathbf}{T1}{LinuxLibertineT-LF}{b}{n}
}

% only with xetex
\DeclareOption{iowan-headings}{\ifxetex
\@fontoptiontrue\newHeadings
{\iowanFont}{\iowanFont\mdseries}\newTheorems{iowan}{\iowanFont\bfseries}\restofTheorems
%\setmathrm{Iowan Old Style} % does not work well
\else\@warning{The iowan option needs XeTeX.}\fi
}

\DeclareOption{goudy-headings}{\ifxetex
\@fontoptiontrue\newHeadings
{\goudyFont}{\goudyFont\mdseries}\newTheorems{goudy}{\goudyFont\bfseries}\restofTheorems
\else\@warning{The goudy option needs XeTeX.}\fi
}
\ProcessOptions\relax

\if@fontoption\else\defaultOption\fi
\if@classico
\IfFileExists{classico.sty}{%
    \RequirePackage{classico}%
  }{%
    \PackageWarning{classico}{%
      Package classico not available, using computer roman sf
    }%
  }%
\fi % Cannot be done within the option declaration

\endinput
