\documentclass[12pt]{memoir}

\pagestyle{plain}
%\pagestyle{simple}
\setlrmargins{*}{*}{1}
\checkandfixthelayout

\setcounter{tocdepth}{2}
\setcounter{secnumdepth}{2}
\counterwithout{section}{chapter}
\counterwithin{equation}{section}
%\numberwithin{equation}{section} % in amsmath
%\counterwithout{figure}{chapter}
\counterwithin{figure}{section}

\makeatletter
% To correct a memoir bug:
\renewcommand{\@memmain@floats}{%
  \counterwithin{figure}{section}
  \counterwithin{table}{section}}
\makeatother

\firmlists

% Not with mathdesign.  Before hyperref, otherwise AucTex is in trouble:
\usepackage{amssymb}

% If you do not want the bibliography on a separate page:
\renewcommand{\bibsection}{% 
\section*{\bibname} 
\prebibhook}

\usepackage[backref,hyperindex,colorlinks,linkcolor=blue,citecolor=blue]{hyperref}
\usepackage[numbered]{bookmark} % Allows to place a bookmark, see the title. Shows section numbers.
% \usepackage[all]{hypcap} % After hyperref, to anchor floats correctly.
% \usepackage{float}
 % After hyperref:
\usepackage[algo2e,algosection,tworuled,noend,noline]{algorithm2e}
\usepackage[sf]{gacs} % Process with XeTeX
\usepackage{gacs-algo} % After hyperref.
% After gacs.sty

%\usepackage[pagecolor={Honeydew1}]{pagecolor}

\hyphenation{com-plex-ity des-tin-at-ion co-lon-ies}

\newcommand{\shownotes}{1}
\ifnum\shownotes=1
\newcommand{\authnote}[3]
{\text{{ \textcolor{#3}{\( \langle\hspace{-0.2em}\langle \)\textsf{\footnotesize #1: #2}\( \rangle\hspace{-0.2em}\rangle \)}}}}
\else
\newcommand{\authnote}[2]{}
\fi
\newcommand{\Pnote}[1]{{\authnote{P}{#1}{cyan}}}
\newcommand{\Inote}[1]{{\authnote{I}{#1}{blue}}}

\renewcommand{\le}{\leq}
\renewcommand{\ge}{\geq}

\newcommand{\fld}[1]{\ensuremath{\textit{#1\/}}}
\newcommand{\rul}[1]{\ensuremath{\texttt{\slshape #1\/}}}
\newcommand{\maj}{\mathrm{maj}}
\newcommand{\sign}{\mathop\mathrm{sign}}

\newcommand{\tEnd}{f_{\mathrm{end}}}
\newcommand{\tZig}{f_{\mathrm{zig}}}
\newcommand{\tHeal}{f_{\mathrm{heal}}}
\newcommand{\tRebuild}{f_{\mathrm{rebuild}}}

% Using def for the possibility of switching between LaTeX and XeTeX:
\def\B{B}  
\def\U{U}

\newcommand{\Bad}{\mathit{Bad}}
\newcommand{\Vacant}{\mathit{Vac}}
\newcommand{\blank}{\text{\textvisiblespace}}
\newcommand{\Configs}{\mathrm{Configs}}
\newcommand{\D}{D}
\newcommand{\E}{E}

\def\G{G}

\newcommand{\h}{h}
\renewcommand{\H}{H}
\newcommand{\hc}{\tilde h}
\newcommand{\Noise}{\mathit{Noise}}
\newcommand{\Output}{\mathit{output}}
\newcommand{\PenetrationLen}{\mathrm{PenetLen}}
\newcommand{\Plus}{\oplus}
\newcommand{\Minus}{\ominus}
\newcommand{\pos}{\mathrm{pos}}

\newcommand{\Q}{Q}

\newcommand{\score}{\mathrm{score}}
\newcommand{\R}{R}
\newcommand{\Tu}{T}
\newcommand{\Tus}{T^{*}}
\renewcommand{\V}{V}
\newcommand{\F}{F}
\newcommand{\Z}{Z}
\newcommand{\z}{z}


\newcommand{\Addr}{\fld{Addr}}
\newcommand{\cAddr}{\fld{cAddr}}
\newcommand{\cCanTurn}{\fld{cCanTurn}}
\newcommand{\Core}{\fld{Core}}
\newcommand{\cCore}{\fld{cCore}}
\newcommand{\Dir}{\fld{Dir}}
\newcommand{\cDir}{\fld{cDir}}
\newcommand{\Drift}{\fld{Drift}}
\newcommand{\Doomed}{\fld{Doomed}}
\newcommand{\cDrift}{\fld{cDrift}}
%\renewcommand{\G}{\fld{NonAdj}}
\newcommand{\NonAdj}{\fld{NonAdj}}
\newcommand{\cHold}{\fld{cHold}}
\newcommand{\Index}{\fld{Index}}
\newcommand{\Info}{\fld{Info}}
\newcommand{\cInfo}{\fld{cInfo}}
\newcommand{\Kind}{\fld{Kind}}
\newcommand{\cKind}{\fld{cKind}}
\newcommand{\cLevel}{\fld{cLevel}}
\newcommand{\Mode}{\fld{Mode}}
\newcommand{\cProg}{\fld{cProg}}
\newcommand{\Heal}{\fld{Heal}}
\newcommand{\rHeal}{\rul{Heal}}
\newcommand{\cHeal}{\fld{cHeal}}
\newcommand{\Plan}{\fld{Plan}}
\newcommand{\Rebd}{\fld{Rebd}}
\newcommand{\cRebd}{\fld{cRebd}}
\newcommand{\Stage}{\fld{Stage}}
\newcommand{\State}{\fld{State}}
\newcommand{\cState}{\fld{cState}}
\newcommand{\Sweep}{\fld{Sw}}
\newcommand{\cSweep}{\fld{cSw}}
\newcommand{\cWork}{\fld{cWork}}
\newcommand{\ZigDepth}{\fld{ZigDepth}}
\newcommand{\ZigDir}{\fld{ZigDir}}

%\newcommand{\Bridge}{\mathrm{Bridge}}
\newcommand{\Coordinated}{\mathrm{Coordinated}}
\newcommand{\decode}{\mathrm{decode}}
\newcommand{\dir}{\mathrm{dir}}
\newcommand{\encode}{\mathrm{encode}}
\newcommand{\front}{\mathrm{front}}
\newcommand{\Rebuilding}{\mathrm{Rebuilding}}
\newcommand{\Histories}{\mathrm{Histories}}
\newcommand{\Last}{\mathrm{Last}}
\newcommand{\Marking}{\mathrm{Marking}}
\newcommand{\Member}{\mathrm{Member}}
\newcommand{\Committing}{\mathrm{Committing}}
\newcommand{\patch}{\mathrm{patch}}
\newcommand{\Planning}{\mathrm{Planing}}
\newcommand{\Target}{\mathrm{Target}}
\newcommand{\Normal}{\mathrm{Normal}}

\newcommand{\PadLen}{\mathit{PadLen}}
\newcommand{\Interpr}{\mathit{Interpr}}

\newcommand{\Healing}{\mathrm{Healing}}
\newcommand{\start}{\mathrm{start}}
\newcommand{\state}{\mathrm{state}}
\newcommand{\Stem}{\mathrm{Stem}}
\newcommand{\tape}{\mathrm{tape}}
\newcommand{\TransferSw}{\mathrm{TransferSw}}
\newcommand{\Un}{\mathrm{Univ}}

\newcommand{\increment}[1]{#1\mathord{+}\mathord{+}}
\newcommand{\decrement}[1]{#1\mathord{-}\mathord{-}}


\newcommand{\ruAddrJmp}{\rul{AddrJmp}}
\newcommand{\Alarm}{\rul{Alarm}}
% \newcommand{\Commit}{\rul{Commit}}
\newcommand{\Comp}{\rul{Compute}}
\newcommand{\BigAlarm}{\rul{BigAlarm}}
%\newcommand{\Vacate}{\rul{Vacate}}
% \newcommand{\Mark}{\rul{Mark}}
\newcommand{\Move}{\rul{Move}}
% \newcommand{\Plan}{\rul{Plan}}
\newcommand{\ruSwing}{\rul{Swing}}
\newcommand{\Transfer}{\rul{Transfer}}
\newcommand{\UsefulComp}{\rul{UsefulComp}}
\newcommand{\WriteRulesBit}{\rul{WriteRulesBit}}
\newcommand{\Zigzag}{\rul{Zigzag}}

\newcommand{\mrk}{\mathrm{mrk}}
\newcommand{\K}{K}
\newcommand{\loc}{\ell_\mrk}
\newcommand{\N}{\mathbf{N}}
\newcommand{\Zg}{\mathcal{Z}_g}

\newcommand{\Cns}[2]{#1_{\textrm{\upshape #2}}}
\newcommand{\cns}[1]{\Cns{c}{#1}}
\newcommand{\cEsc}{\cns{escape}}
\newcommand{\cCleanS}{\cns{clean-s}}
\newcommand{\cCleanT}{\cns{clean-t}}
\newcommand{\cDwell}{\cns{dwell}}
\newcommand{\cCDepth}[1]{\cns{c-depth-#1}}
\newcommand{\cPass}{\Cns{c}{pass}}
\newcommand{\cSpill}{\cns{spill}}
\newcommand{\cSpace}{\cns{space}}
\newcommand{\cDecr}{\cns{decr}}
\newcommand{\cIncr}{\cns{incr}}
\newcommand{\mPlainEdge}{\Cns{\mu}{plain-edge}}
\newcommand{\mHalfTurn}{\Cns{\mu}{half-turn}}
\newcommand{\mTurnDone}{\Cns{\mu}{turn-done}}
\newcommand{\mRebuild}{\Cns{\mu}{rebuild}}
\newcommand{\sPass}{\Cns{\sigma}{pass}}
\newcommand{\sQ}{\Cns{\sigma}{Q}}
\newcommand{\sScore}{\Cns{\sigma}{score}}

\begin{document}

\title{Notes to Ilir on the Turing machine}
% Why do I need this?  Some people get the title bookmarked even without this.
\bookmark[page=1,level=0]{Notes to Ilir on the Turing machine}

\author{P\'eter}

\maketitle

\section{The problem}

I am returning to the seemingly innocent problem of proving the Spill Bound property
in induction, which I am finding much nastier than originally imagined.
I recall that I missed the following problem: 
the head slides away very far on the dirt, 
comes back \( \Tu^{*} \) time later to leave an island in a burst, 
then repeats this many times.
This way, the dirt seems to be capable of spilling out without bound.
The solution I am proposing is to add a parameter \( \pi \)
and add an axiom that passing over an area \( \pi \) times without burst will clean it.
Here, still many details must be worked out, but I feel that this has more chance of succeeding.

\section{Proposed new axioms}

Let us have a parameter \( \pi \) (for ``pass number'').
It may not be necessary, as the cell size \( \B \) is also a function of the pass number
(both are functions of level), it seems simpler to use a separate parameter.

We will fix some  constants \( c_{i} \).
Consider a noise-free time interval \( J \), and a space interval \( I \).

\begin{description}
\item[Spill Bound] 
The Spill Bound axiom bounds the amount by which the dirt can spill out
of \( I \) during \( J \), by \( 2\B \).

\item[Dwell Cleaning]
The Dwell Cleaning axiom stays essentially how it was.
For a constant
\begin{align}\label{eq:cDwell}
 \cDwell < \gamma,
 \end{align}
 if the head stays in an interval of size \( \cDwell\B \) for time \( \gamma\Tu \)
then the interval becomes clean.

\item[Pass Cleaning]
If the head passes an interval in a noise-free way \( \pi \) times
the interval becomes clean.

\item[Attack Cleaning]
If the head exits and enters a clean area from the same side
twice, then the area will be extended.

\end{description}

\Pnote{Do we need yet this following paragraph?}
For this, we must make sure in simulation of a transition at
cell \( x \) of \( M^{*} \),
that the head will not be captured at \( x+\B^{*} \) during the computation of the transition
that makes it turn back to the left.
To achieve this, the last turn in the simulation will go (significantly)
closer to the colony end \( x+\B^{*} \) than the previous turns.
This way, capturing followed by a return that does not trigger a rebuild
will only be possible if the computation of the simulated transition in the colony of \( x \)
terminates first.

\section{Sketch of the inductive proof}

In the inductive construction, we will set \( \pi^{*}=c_{2}\pi \), \( \Q=\Omega(\pi) \),
for a constant \( c_{2} \) to be determined later.
In the hierarchy this makes \( \Q \) an exponential function of the level, which is still
OK for the sparsity lemma.

\begin{lemma}\label{lem:dirty-passes}
(The constants \( c_{1},c_{3}>0 \) will be specified later.)
Consider an interval \( I \) of size \( |I|\ge c_{1}\pi \) 
that will be passed by \( n\ge c_{2}\pi \) times
by the head in a burst-free way during some time interval \( J \).
There could be some other times in \( J \) when the head is subject to a burst inside \( I \).
Assume that the total number of these times is \( \le c_{3} n \).
(We don't count the times when the head enters and leaves \( I \) without
any burst.)
Then there is some time during \( J \) when \( I \) becomes clean.
\end{lemma}
\begin{proof}[Proof sketch]
In this sketch I am ignoring the corrections having to do with the
limited spilling effects.
It is sufficient to conside the case \( n=c_{2}\pi \), since otherwise
we can subdivide the \( n \) passes into segments of size \( c_{2}\pi \),
and one of them must contain fewer than \( c_{3}c_{2}\pi \) bursts.

Let us introduce a new \df{virtual} time counting.
We only count the times in \( J \) when the head either passes \( I \)
or is subject to a burst in \( J \).
Let this virtual time interval be denoted by \( K \): we can assume it starts at 0.

There is a subset \( C \) of the interval \( I \),
of size \( \ge |I|-c_{3}c_{2}\beta\pi \), in which no burst occurs at all.
Then at some virtual time \( u_{0}=O(\beta\pi) \), the set \( C \) becomes clean.
We will actually take for \( C \) the larger set of points in which no burst occurred until
\( u_{0} \).
From this time on, we are looking at the shrinking of the set \( I\setminus C \)
in the space-virtual-time rectangle \( I\times K \).

Given a space-virtual-time segment \( \lint{a}{b}\times u \),
let us mount on it a triangle \( T\subset I\times K \)
which at time \( u+j \) covers the interval
 \begin{align*}
 \lint{a+(j/4)\B}{v-(j/4)\B}.
 \end{align*}
thus \( T \) reaches to virtual time \( v=u+2(b-a)/\B \).
We will call \( v-u \) the \df{height} of \( T \), denoted by \( |T| \).
If the complement of \( \lint{a}{b} \) is clean at virtual time \( u \)
and no burst occurs until virtual time 
\( v \), then the Attack Cleaning property implies that the dirt
is confined to \( T \) and thus disappears by virtual time \( v \).
(In the special case when \( \lint{a}{b} \) reaches to the end of the interval \( I \),
we extend the base beyond the end, creating a rectangle (with the same slopes)
at most twice as large whose tip reaches the end as well.)

Let us now mount a triangle over each interval of the set \( I\setminus C \)
at virtual time 0, creating a set \( \cT_{0} \) of disjoint triangles.

If no burst occurs in \( J \) 
then the Attack Cleaning property implies that the dirt is confined to these triangles.
Now, every time a burst affects the head, it may create a dirt interval 
size \( \lint{x}{x+\beta\B} \), at some virtual time \( u \).
Let us mount a triangle over each such \( \lint{x}{x+\beta\B}\times\{u\} \).
Let us add all these triangles to the set \( \cT_{0} \) to get a set of
triangles \( \cT \).
These are not necessarily disjoint anymore.

If two virtual triangles \( T_{1},T_{2} \) intersect,
and \( T \) be the smallest virtual triangle containing both,
then it is easy to see that \( |T|\le|T_{1}|+|T_{2}| \).
We will denote \( T=T_{1}+T_{2} \).

Let us now perform the following operation that will create a disjoint set
of triangles.
We start with \( \cT \) and if we find two intersecting triangles 
in it, then we replace them with their sum.
We repeat this until the remaining set \( \cT' \) consists of disjoint triangles.
By the above remark \( \sum_{T\in \cT}|T| = \sum_{T\in \cT'}|T| \).
The Attack Cleaning property will show that the complement of these triangles
is clean.
The sum of their heights (ignoring the boundary effect, which brings in at most a factor 2) is
at most \( 2 c_{3}c_{2}\beta\pi \).
If \( c_{3} \) is small compared to \( c_{1}  \) and \( c_{2}\beta, \) 
then therefore there will be virtual
times in \( K \) not intersecting with any element of \( \cT' \).
At the corresponding real times, the interval \( I \) is clean.
\end{proof}

\begin{lemma}\label{lem:rebuild-pass}
  Let \( \lint{a}{b} \) be a clean interval of size \( \ge 6 \Q\B \).
If the head passes it without a burst then \( \lint{a+2\B}{b-2\B} \)
becomes clean for \( M^{*} \).
\end{lemma}
The factors \( 6,2 \) will probably need to be changed.
\begin{proof}[Proof sketch]
  The machine, passing the interval will either find it healthy, in which case
the normal operation of the simulation makes it clean for \( M^{*} \),
or completes a rebuilding operation.
\end{proof}

In this lemma the constants will probably change.
\begin{lemma}\label{lem:burst-density}
  Consider an interval \( K \) of size \( 3 \Q\B \) and a time interval \( J \) in which
no burst of \( M^{*} \) occurs.
If \( c_{2}\pi \) bursts occur in \( K \) during \( J \) then at some time in \( J \)
the interval \( K \) becomes clean in \( M^{*} \).
\end{lemma}
\begin{proof}[Proof sketch]
For 
\begin{align*}
 d=\cDwell/3
\end{align*}
(where \( \cDwell \) was introduced in~\eqref{eq:cDwell}),
both positive and negative \( i \), and \( j=0,\dots,d-1 \), let
\begin{align*}
   K_{ij}=x+3\Q\B\lint{d i+j}{d i+j+1},\ 
K_{i}=\bigcup_{j=0}^{d-1}K_{ij}=x+3\Q\B\lint{di}{d(i+1)},
 \end{align*}
so \( K=K_{00} \).
Consider the sweeps corresponding to the \( c_{2}\pi \) bursts in \( K \).
If a sweep does not exit \( K \) on either side then Dwell Cleaning and Attack Cleaning
of \( M^{*} \) becomes applicable.
Assume this does not happen; then
either half of these sweeps exits \( K \) on the left, or half of them exits it on the right.
Without loss of generality assume that they pass on the right.
Then they will have to pass the whole interval \( K_{0} \) (otherwise again Dwell Cleaning
and Attack Cleaning of \( M^{*} \)
applies), and thus each interval \( K_{0,j} \) gets at least this many passes.
So, the interval \( K_{0} \) gets \( (c_{2}/2)\pi \) noise-free passes.
Also, none of the \( K_{0j} \) becomes clean for \( M^{*} \) during the first half of these passes,
since then the Attack Cleaning property would clean \( K_{00} \) as well during the remaining
passes.

Now, for \( i=1,2,\dots \) we will show that there is 
an \( i'  \) with \( |i'|\le i \) such that each \( K_{i'j} \)
gets at least \( c_{2} 2^{i-1}\pi \) burst-free overpasses  during \( J \), 
and \( K_{i'j} \) does not become clean during the first half of these.
This clearly must break down somewhere, leading to a contradiction.

Suppose that the statement was proved up to some \( i \), we will prove it for \( i+1 \).
In order for the interval \( K_{i'j} \) not to become clean for \( M^{*} \), 
by Lemmas~\ref{lem:dirty-passes}, \ref{lem:rebuild-pass}
the total number of bursts happening in it and belonging to sweeps not 
passing it must be at least \( c_{3}c_{2} 2^{i-1}\pi \).
This is true of all \( j \), so the total number of bursts whose sweeps do not pass \( K_{i'} \)
is at least \( d c_{3}c_{2} 2^{i-1}\pi \).
If a sweep does not exit \( K_{i'} \) on either side then Dwell Cleaning becomes applicable,
so either half of these sweeps exits \( K_{i'} \) on the left, or half of them exits it on the right.
If they pass on the right then let \( (i+1)'=i'+1 \), otherwise \( (i+1)'=i'-1 \).
Then they will have to pass the whole interval \( K_{(i+1)'} \) (again, otherwise Dwell Cleaning
applies), and thus each interval \( K_{(i+1)',j} \) gets at least this many passes.
Now choosing \( d \) (and thus \( \cDwell \)) large enough 
to get \( d c_{3}>2 \) finishes the proof.
\end{proof}


\subsection{Spill bound}

Consider the neighboring intervals \( I,K \) separated by point \( x \),
where \( I \) is clean for \( M^{*} \).
We want to limit the amount that \( K \) is going to spill over to \( I \) during a time
interval \( J \) that the head spends in \( K \) and is free from \( M^{*} \)-noise.

Spill into \( I \) can occur in two ways: one, as regulated by the Spill Bound axiom, the other way is via bursts near the boundary \( x \).
The first way is limited by \( 2\B \), so the important one to consider are the bursts.
In order to extend the boundary to the right by \( \Q\B \),
we need \( \Q/\beta \) bursts near \( x \).
This can be excluded using Lemma~\ref{lem:burst-density}.

\subsection{Dwell Cleaning, Attack Cleaning}

The proof these properties should go similarly to before.

\subsection{Pass Cleaning}

The proof relies on Lemma~\ref{lem:burst-density}, and then 
Lemmas~\ref{lem:dirty-passes} and~\ref{lem:rebuild-pass}.

\end{document}
